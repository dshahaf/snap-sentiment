{% extends "base.html" %}

{% block title %}Simple Analysis{% endblock %}

{% block navbar_simple %}<li class="active"><a href="/simple">Simple</a></li>{% endblock %}

{% block main-title %}Simple Analysis{% endblock %}

{% block main-description %}
	<p>The sentiment is determined based on the number of positive and negative words that are present.</p>
{% endblock %}

{% block main-content %}
	<div class="row">
		<div class="offset2 span8">
			<table class="table-centered table table-striped table-condensed table-bordered">
				<caption><strong>Available Data Set Actions</strong></caption>
				<thead>
					<tr>
						<th>Data Set</th>
						<th>Positive Sample</th>
						<th>Negative Sample</th>
						<th>Accuracy Test</th>
					</tr>
				</thead>

				<tbody>
					<tr>
						<td>Movie Review</td>
						<td>
							<form action="/simple/" method="POST" style="margin-bottom: 0px;">
								{% csrf_token %}
								<input type="hidden" name="action" value="sample-positive-movie" />
								<input type="submit" value="Go" class="btn btn-success btn-small"/>
								{% if action|stringformat:"s" == "sample-positive-movie"  %}
								<span class="symbol-check" style="opacity: 0.5;">&#10003;</span>
								{% endif %}
							</form>
						</td>

						<td>
							<form action="/simple/" method="POST" style="margin-bottom: 0px;">
								{% csrf_token %}
								<input type="hidden" name="action" value="sample-negative-movie" />
								<input type="submit" value="Go" class="btn btn-danger btn-small"/>
								{% if action|stringformat:"s" == "sample-negative-movie"  %}
								<span class="symbol-check" style="opacity: 0.5;">&#10003;</span>
								{% endif %}
							</form>
						</td>

						<td>
							<form action="/simple/" method="POST" style="margin-bottom: 0px;">
								{% csrf_token %}
								<input type="hidden" name="action" value="test-movie" />
								<input type="submit" value="Go" class="btn btn-danger btn-info btn-small"/>
								{% if action|stringformat:"s" == "test-movie"  %}
								<span class="symbol-check" style="opacity: 0.5;">&#10003;</span>
								{% endif %}
							</form>
						</td>
					</tr>
				</tbody>

			</table>
		</div>
	</div>

	<div class="row">
		<div class="span6">
			<div class="text-center"><h4>Input
				<a href="/simple/" style="font-size:13px; font-weight: normal; text-decoration: underline; margin-left: 3px;">(clear)</a>
			</h4></div>
			<form action="/simple/" method="POST">
				{% csrf_token %}
				<textarea class="textarea-full textarea" rows="20" name="textarea">{{ text }}</textarea>
				<div class="muted" style="margin-bottom: 0px; font-size: 13px;">
				</div>
				<input type="hidden" name="action" value="user-input" />
				<input type="submit" value="Go" class="btn btn-success btn-large offset2" style="margin-top: 5px;" />
			</form>
		</div>

		<div class="span6">
			<div class="text-center"><h4>Output</h4></div>
				<div class="result">
					{% if result_test %}
						<table class="table table-centered table-bordered table-condensed">
							<thead>
								<tr>
									<th></th>
									<th>Total </th>
									<th>Correctly Categorized</th>
									<th>Accuracy</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>Positive</td>
									<td>{{ result_test.total.positive }}</td>
									<td>{{ result_test.correct.positive }}</td>
									<td>{{ result_test.accuracy.positive }}</td>
								</tr>
								<tr>
									<td>Negative</td>
									<td>{{ result_test.total.negative }}</td>
									<td>{{ result_test.correct.negative }}</td>
									<td>{{ result_test.accuracy.negative }}</td>
								</tr>
							</tbody>
						</table>
					{% endif %}

					{% if result_single %}

					<!-- SECTION 1: Overall sentiment -->
					<div class="section overall-sentiment">
						<div class="section-header">
							<span class="section-title">Overall Sentiment</span>
						</div>
						{% if result_single.overall_sentiment|stringformat:"s" == "positive"  %}
							<span class="sentiment-positive font-bold">Positive</span>
						{% else %}
						{% if result_single.overall_sentiment|stringformat:"s" == "negative"  %}
							<span class="sentiment-negative font-bold">Negative</span>
						{% else %}
							<span class="font-bold">Neither</span>
						{% endif %}
						{% endif %}
					</div>

					<!-- SECTION 2: Processed, color-coded text -->
					{% if result_single.words|length > 0 %}
					<div class="section words" >
						<div class="section-header">
							<span class="section-title">Processed Text</span>
						</div>
						{% for word in result_single.words %}
							{% if word.sentiment|stringformat:"s" == "positive"  %}
								<span class="sentiment-positive font-bold">{{ word.value }}</span>
							{% else %}
							{% if word.sentiment|stringformat:"s" == "negative"  %}
								<span class="sentiment-negative font-bold">{{ word.value }}</span>
							{% else %}
								<span class="muted">{{ word.value }}</span>
							{% endif %}
							{% endif %}
						{% endfor %}
					</div>
					{% endif %}

					<!-- SECTION 3: Statistics -->
					<div class="section">
						<div class="section-header" style="margin-bottom: 3px;">
							<span class="section-title">Stats</span>
						</div>

						<div class="section positive-words" style="position: absolute; padding-bottom: 20px;">
							<div class="subsection-header">
								<span class="section-title">Positive Words ({{ result_single.sentimental_words.count.positive }})</span>
							</div>
							{% for word in result_single.sentimental_words.positive %}
								<div class="muted"><span class="color-light-green">{{ word.value }}</span> (<span>{{ word.count }}</span>)</div>
							{% endfor %}
						</div>

						<div class="section negative-words offset3">
							<div class="subsection-header">
								<span class="section-title">Negative Words ({{ result_single.sentimental_words.count.negative }})</span>
							</div>
							{% for word in result_single.sentimental_words.negative %}
								<div class="muted"><span class="color-light-red">{{ word.value }}</span> (<span>{{ word.count }}</span>)</div>
							{% endfor %}
						</div>
					</div>

					<div style="height: 20px;">
					</div>
					
					{% endif %}
				</div> <!-- result -->
		</div>
	</div>
{% endblock %}